<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Listar Libros</title>
</head>
<body>

    <div id="contenedor-libros" class="row">
        <!-- Plantilla de libro (inicialmente oculta) -->
        <div class="col libro" style="display: none;">
            <div class="card border-0 fuente3">
                <a href=""><img class="imagen" src="../img/libro2.jpg" style="cursor: pointer;" alt=""
                        onclick="mostrarInformacionLibro(event)" class="rounded-top-md align-self-center" width="200px"
                        height="290"></a>
                <!-- Card Body -->
                <div class="card-body">
                    <div class="d-flex justify-content-around align-items-center mb-2">
                        <span class="badge bg-success"></span>
                        <div>
                            <svg class="bi me-2 text-danger" width="30" height="24" fill="CurrentColor">
                                <use xlink:href="../style/bootstrap-icons-1.11.1/bootstrap-icons.svg#heart-fill" />
                            </svg>
                            <svg class="bi me-2" width="30" height="24">
                                <use xlink:href="../style/bootstrap-icons-1.11.1/bootstrap-icons.svg#cart4" />
                            </svg>
                        </div>
        
                    </div>
                    <h6 class="mb-1 text-center">
                        <span class="text-decoration-line-through text-danger"></span>
                        <span class="fw-bold precio">$</span>
                        <a href="" onclick="mostrarInformacionLibro(event)" class="nav-link nombre"></a>
                    </h6>
                </div>
        
            </div>
        </div>
    </div>

    <script>
        function listarLibros(index = 0) {
            fetch('https://sakuraapi.000webhostapp.com/api/Productos')
                .then(function (response) {
                    return response.json();
                })
                .then(function (data) {
                    const contenedorLibros = document.getElementById('contenedor-libros');
                    const libroTemplate = document.querySelector('.libro');

                    // Verificar si hay más elementos en el JSON
                    if (index < data.length) {
                        // Clonar el elemento de plantilla para el nuevo libro
                        const nuevoLibro = libroTemplate.cloneNode(true);
                        nuevoLibro.style.display = ''; // Mostrar el nuevo libro

                        // Actualizar contenido con la información del libro actual
                        nuevoLibro.querySelector('.imagen').setAttribute('src', data[index].image);
                        nuevoLibro.querySelector('.precio').textContent = data[index].sell_price;
                        nuevoLibro.querySelector('.nombre').textContent = data[index].name;

                        // Agregar el nuevo libro al contenedor de libros
                        contenedorLibros.appendChild(nuevoLibro);

                        // Llamar recursivamente para el siguiente libro
                        listarLibros(index + 1);
                    }
                })
                .catch(function (err) {
                    console.log(err);
                });
        }

        // Llamar a la función para comenzar el proceso
        listarLibros();
    </script>

</body>
</html>


